<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>RV2020 Alpha - RChain Community Governance</title>
  <style>
    .privateKeyQR { display: hidden }  /* issue: fail safe if no CSS? */
    .attachment-full { float: right }
    #devKeyViz { float: right }
  </style>
  <link rel="stylesheet"
        href="https://cdn.rawgit.com/Chalarangelo/mini.css/v3.0.1/dist/mini-default.min.css">
</head>
<body>
  <a href="https://github.com/rchain-community/rv2020">
    <img width="149" height="149"
         src="https://github.blog/wp-content/uploads/2008/12/forkme_right_green_007200.png?resize=149%2C149"
         class="attachment-full size-full" alt="Fork me on GitHub"
         data-recalc-dims="1">
  </a>

  <label for="drawer-control" class="drawer-toggle persistent"></label>
  <input  type="checkbox" id="drawer-control" class="drawer persistent" />
  <nav>
    <label for="drawer-control" class="drawer-close"></label>
    <ul>
      <a href="#card-dev-acct">Account</a>
      <a href="#card-intro">Intro</a>
      <a href="#card-deploy-test">Testing</a>
      <a href="#card-contact">Contact</a>
    </ul>
  </nav>

  <h1>RV2020: An exploration into RChain governance</h1>

  <div class="card fluid" id="card-dev-acct">
  <h2 class="content-subhead">Device REV Account</h2>
  <p>
    <strong>Welcome!</strong> To participate in rv2020, this app
    maintains an account <strong>on this device</strong> to hold
    a small amount of REV for contract execution.
  </p>
  <form id="deployKey3">
    <fieldset>
      <legend>Device Account</legend>
      <div id="devKeyViz"></div>

      <div>
        <label for="devAddr">Device REV address</label>
        <input id="devAddr" readonly="readonly" size="50" />
      </div>

      <div>
        <label for="devBal">Device REV balance</label>
        <input id="devBal" readonly="readonly" placeholder='?' />
        <button id="checkBalance" type="button">re-check</button>
      </div>
      <button type="button"
              id="devKeyGen">Create Device REV Account</button>

      <p>
        <small><strong>Note:</strong> the private key is stored in
          <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage"
             >localStorage</a> for this web site. To see it, enter
          <code>localStorage.getItem('deviceKey')</code> in a javascript console.
        </small>
      </p>
      <img id="qr3" class="privateKeyQR" />
    </fieldset>
  </form>
  <script type="module">
    import { acctUI } from './_dist_/intro.js';
    acctUI({
      setTimeout, fetch,
      getElementById: (id) => document.getElementById(id),
      getRandomValues: (arr) => window.crypto.getRandomValues(arr),
      inputElement: (id) => document.getElementById(id),
      localStorage: window.localStorage,
    });
  </script>
  </div>

  <div class="card fluid" id="card-intro">
  <h2>Introductions: accounts, icons, names</h2>
  <form id="intro1">
    <fieldset>
      <label>Nickname <input id="nickname" /></label>
      <br />
      <img id="blockie1" />
    </fieldset>
  </form>
  <script type="module">
    import { ui } from './_dist_/intro.js';
    ui({
      getElementById: (id) => document.getElementById(id),
      inputElement: (id) => document.getElementById(id),
    });
  </script>
  </div>
  <div class="card fluid" id="card-deploy-test">
    <h2>Deploy Integration Test</h2>
    <form id="deploy1">
        <fieldset>
            <label>
                Account
                <!--
Private key	5ae90fb24e3d49949ca4d0132b0abfc1eb3213d4285683c5524ec68347dbdfd3
Public key	04e128e43cea6290e500bf2f2e90f1bcc8448a3ce958eca85939ca9896fa5a1bd3fd7923f47a7fb767867790bfc8000e0a35392de42982cdee4e0abfdf3344356b
ETH	186743b4d70f7e8f78b22e11d7d93635d367fd3c
REV	1111B9VWWEpX2b1wWpesgwxt5n9EAsqmTdH2GjaUJrmTWKQw57rPk
                -->
                <select id="account">
                    <option value="5ae90fb24e3d49949ca4d0132b0abfc1eb3213d4285683c5524ec68347dbdfd3">1111B9VWWEpX2b1wWpesgwxt5n9EAsqmTdH2GjaUJrmTWKQw57rPk</option>
                </select>
            </label>
            <br />
            <label>Timestamp: <input type="integer" name="timestamp" /></label>
            <br />
            <textarea id="term" cols="80" rows="12">
new deployId!(`rho:rchain:deployId`),
log(`rho:io:stderr`)
in {
  log!("hello") |
  deployId!(1 + 1)
}
            </textarea>
            <br />
            <label>
              Validator
              <select id="apiBase">
                <option value="https://node1.testnet.rchain-dev.tk:443">testnet node 1</option>
              </select>
            </label>
            <br />
            <label>
              Observer
              <select id="observerApiBase">
                <option value="https://observer.testnet.rchain.coop">testnet observer</option>
              </select>
            </label>
            <br />
            <button id="deploy" type="button">Deploy</button>
        </fieldset>
    </form>
    <noscript>Please excuse lack of non-JavaScript support.</noscript>
    <script type="module">
        import ui from "./_dist_/rgate.js";
        ui({
            fetch,
            getElementById: (id) => document.getElementById(id),
            inputElement: (id) => document.getElementById(id),
            clock: () => new Date()
        })
    </script>
  </div>
  <div class="card fluid" id="card-contact">
    <h2>Contact</h2>
    <ul>
      <li>
        <a href="https://github.com/rchain-community">
          rchain-community</a>/<a href="https://github.com/rchain-community/rv2020">rv2020</a>
      </li>
    </ul>
    <address>
        <a href="https://www.madmode.com/">Dan Connolly</a>
    </address>
  </div>
</body>
</html>
